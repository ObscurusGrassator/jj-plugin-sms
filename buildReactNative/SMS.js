var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));try{var _require=require('react-native'),Linking=_require.Linking;}catch(err){}module.exports=function(){function SMS(options){(0,_classCallCheck2.default)(this,SMS);this.lastMessages='';this.options=options;}(0,_createClass2.default)(SMS,[{key:"sendRequest",value:(function(){var _sendRequest=(0,_asyncToGenerator2.default)(function*(method){var params=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return this.options.mobileAppOpen('jjplugin.obsgrass.sms','JJPluginSMSService','MainActivity',[["serviceMethod",method],["input",JSON.stringify(params)]]);});function sendRequest(_x){return _sendRequest.apply(this,arguments);}return sendRequest;}())},{key:"getContactByName",value:(function(){var _getContactByName=(0,_asyncToGenerator2.default)(function*(name){var constact=yield this.sendRequest('getContactByName',{name:name});if(!constact)throw`Meno "${name}" sa v kontaktoch nenachádza.`;return constact;});function getContactByName(_x2){return _getContactByName.apply(this,arguments);}return getContactByName;}())},{key:"sendMessage",value:(function(){var _sendMessage=(0,_asyncToGenerator2.default)(function*(smsNumber,message,fullName){message=message.replace(/ __? /g,' ');if(yield this.options.getSummaryAccept(`SMS plugin: Môžem poslať správu priateľovi ${fullName||smsNumber} s textom: ${message}`)){yield this.sendRequest('sendSMS',{number:smsNumber,message:message});yield this.options.speech('Odoslané.');}else{yield this.options.speech('Príkaz bol zrušený.');}});function sendMessage(_x3,_x4,_x5){return _sendMessage.apply(this,arguments);}return sendMessage;}())},{key:"getMessages",value:(function(){var _getMessages=(0,_asyncToGenerator2.default)(function*(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if(options.makrAsReaded)options.setAsRread=options.makrAsReaded;if(options.box=='all')options.box='';if(options.minDateMilliseconds)options.minDate=options.minDateMilliseconds;if(options.maxDateMilliseconds)options.maxDate=options.maxDateMilliseconds;if(options.findMessageByRegex)options.bodyRegex=options.findMessageByRegex;options.read=options.onlyRead?1:0;if(options.smsFromNumber)options.address=options.smsFromNumber;var result=yield this.sendRequest('getNewSMSs',options);for(var i in result){if(options.makrAsReaded)Linking.openURL(`sms:${result[i].number}`);}return result;});function getMessages(){return _getMessages.apply(this,arguments);}return getMessages;}())}]);return SMS;}();